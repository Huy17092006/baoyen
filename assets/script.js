const _0x1b3729=_0x3b70;!function(e,t){const n=_0x3b70,a=_0xa524();for(;;)try{if(990621===-parseInt(n(685))/1+parseInt(n(683))/2+-parseInt(n(770))/3+-parseInt(n(522))/4+parseInt(n(585))/5+parseInt(n(677))/6*(parseInt(n(645))/7)+parseInt(n(646))/8*(parseInt(n(758))/9))break;a.push(a.shift())}catch(e){a.push(a.shift())}}();import*as _0x28405d from"three";import{OrbitControls}from"three/addons/controls/OrbitControls.js";import{FontLoader}from"three/examples/jsm/loaders/FontLoader.js";import{TextGeometry}from"three/examples/jsm/geometries/TextGeometry.js";const scene=new(_0x28405d[_0x1b3729(652)]);scene.fog=new(_0x28405d[_0x1b3729(552)])(0,.0015);const camera=new _0x28405d.PerspectiveCamera(75,window[_0x1b3729(732)]/window[_0x1b3729(593)],.1,1e5);camera[_0x1b3729(648)][_0x1b3729(511)](0,20,30);const renderer=new(_0x28405d[_0x1b3729(629)])({antialias:!0});function _0x3b70(e,t){const n=_0xa524();return(_0x3b70=function(e,t){return n[e-=496]})(e,t)}renderer[_0x1b3729(571)](window[_0x1b3729(732)],window[_0x1b3729(593)]),renderer.setPixelRatio(Math.min(window[_0x1b3729(549)],2)),renderer[_0x1b3729(638)]=_0x28405d.SRGBColorSpace,document[_0x1b3729(641)](_0x1b3729(568))[_0x1b3729(566)](renderer[_0x1b3729(523)]);const controls=new OrbitControls(camera,renderer.domElement);function createGlowMaterial(e,t=128,n=.55){const a=_0x1b3729,o=document[a(602)]("canvas");o.width=o[a(679)]=t;const r=o.getContext("2d"),i=r[a(723)](t/2,t/2,0,t/2,t/2,t/2);i[a(513)](0,e),i[a(513)](1,a(713)),r[a(518)]=i,r[a(749)](0,0,t,t);const s=new(_0x28405d[a(501)])(o),l=new(_0x28405d[a(548)])({map:s,transparent:!0,opacity:n,depthWrite:!1,blending:_0x28405d[a(664)]});return new(_0x28405d[a(763)])(l)}controls[_0x1b3729(761)]=!0,controls.autoRotate=!0,controls.autoRotateSpeed=.1,controls[_0x1b3729(535)]=!1,controls.target[_0x1b3729(511)](0,0,0),controls[_0x1b3729(728)]=!1,controls[_0x1b3729(550)]=15,controls[_0x1b3729(516)]=300,controls[_0x1b3729(718)]=.3,controls[_0x1b3729(536)]=.3,controls[_0x1b3729(767)]();const centralGlow=createGlowMaterial(_0x1b3729(649),156,.25);function _0xa524(){const e=["add","7SXIwYj","3413304UBxXhE","cos","position","rgba(255,255,255,0.8)","Chạm Vào Tinh Cầu","./img/3.jpg","Scene","arcTo","LinearFilter","preventDefault","ceil","left","floor","max","pitchSpeed","dataLove2Loveloom","orientationchange","hsla(","AdditiveBlending","mozRequestFullScreen","documentElement","Group","translate","./img/4.jpg","time","px Arial, sans-serif","Mesh","getY","#f8bbd0","getX","\n        varying vec3 vColor;\n        void main() {\n            // Làm cho các hạt có hình tròn thay vì hình vuông\n            float dist = length(gl_PointCoord - vec2(0.5));\n            if (dist > 0.5) discard;\n\n            gl_FragColor = vec4(vColor, 1.0);\n        }\n    ","7762662oIRCIV","setAttribute","height","getZ","trailLength","opacity","1206262cKaNmO","bold ","724104PVPEHC","strokeText","arms","uniforms","getContext","tiltSpeed","push","points","initialPosition","#a259f7","measureText","other","body","main-planet","scale","splice","getMaxAnisotropy","geometryFar","materialFar","#3fd8c7","onload","ShapeGeometry","shadowColor","huy17092006.github.io","distanceTo","forEach","PointsMaterial","color","rgba(0,0,0,0)","blur(2px)","shadowBlur","textBaseline","click","zoomSpeed","intersectObjects","setFromCamera","Line","starfield","createRadialGradient","material","radius","clientY","randomnessPower","enablePan","updateProjectionMatrix","pitchPhase","minFilter","innerWidth","rgba(180, 120, 200, ","head","style","clientX","pow","alphabetic","getBoundingClientRect","restore","rgba(220, 180, 255, 0.5)","DOMContentLoaded","location","msRequestFullscreen","getPixelRatio","TextureLoader","vertexShader","PlaneGeometry","fillRect","speed","type","textRings","needsUpdate","name","\n        uniform float time;\n        uniform sampler2D baseTexture;\n        varying vec2 vUv;\n        void main() {\n            vec2 uv = vUv;\n            float angle = length(uv - vec2(0.5)) * 3.0;\n            float twist = sin(angle * 3.0 + time) * 0.1;\n            uv.x += twist * sin(time * 0.5);\n            uv.y += twist * cos(time * 0.5);\n            vec4 texColor = texture2D(baseTexture, uv);\n            float noise = sin(uv.x * 10.0 + time) * sin(uv.y * 10.0 + time) * 0.1;\n            texColor.rgb += noise * vec3(0.8, 0.4, 0.2);\n            gl_FragColor = texColor;\n        }\n    ","rollPhase","touchmove","45ljMvat","RingGeometry","\n            varying vec3 vNormal;\n            void main() {\n                vNormal = normalize(normalMatrix * normal);\n                gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n            }\n        ","enableDamping","fontScale","Sprite","setProperty","log","#f06292","update","ShaderMaterial","data","4743840CThJjR","hint-icon-group","subVectors","NormalBlending","./img/1.jpg","fillText","drawImage","\n            varying vec3 vNormal;\n            uniform float time;\n            void main() {\n                float intensity = pow(0.7 - dot(vNormal, vec3(0.0, 0.0, 1.0)), 2.0);\n                gl_FragColor = vec4(1.0, 1.0, 1.0, intensity * (0.8 + sin(time * 5.0) * 0.2));\n            }\n        ","#fff","CanvasTexture","\n        varying vec3 vNormal;\n        void main() {\n            vNormal = normalize(normalMatrix * normal);\n            gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        }\n    ","love","canvas","Color","maxLife","filter","CylinderGeometry","spacingScale","clone","set","cjk","addColorStop","#e1aaff","random","maxDistance","white","fillStyle","atan2","stroke","innerHTML","5341560afhIWK","domElement","rollAmplitude","geometryNear",", 80%, 50%, 0.6)","gesturestart","children","beginPath","webkitRequestFullscreen","rotation","aspect","lineWidth","AmbientLight","enabled","rotateSpeed","lookAt","materialNear","initialAngle","crossOrigin",", Điểm mỗi ảnh: ","Raycaster","#b2ff59","heartImages","DoubleSide","getPoint","addEventListener","SpriteMaterial","devicePixelRatio","minDistance","copy","FogExp2","progress","randomness","multiplyScalar","top","pitchAmplitude","angleOffset","moveTo","userData","tiltPhase","strokeStyle","isTextRing","value","#ffffff","appendChild","middle","container","SRGBColorSpace","width","setSize","intersectObject","closePath","none","ringRadius","slice","traverse","rollSpeed","colorSpace","resize","setFromPoints","remove","BackSide","render","3005860ocSzNk","now","addScaledVector","hostname","life","SphereGeometry","src","anisotropy","innerHeight","MeshBasicMaterial","sin","parent","isGroup","fragmentShader","LineBasicMaterial","setDrawRange","lerp","createElement","object","count","\n        varying vec3 vNormal;\n        uniform vec3 glowColor;\n        void main() {\n            float intensity = pow(0.7 - dot(vNormal, vec3(0.0, 0.0, 1.0)), 2.0);\n            gl_FragColor = vec4(glowColor, 1.0) * intensity;\n        }\n    ","#f48fb1","normalize","font","transparent","#e0b3ff","CubicBezierCurve3","portrait-mode","BufferAttribute","--vh","Galaxy","curve","geometry","classList","length","target","isPoints","Vector3","renderOrder","charCodeAt","capabilities","tiltAmplitude","trail","requestFullscreen","WebGLRenderer","BufferGeometry","ringMesh","getAttribute","lineTo","bold 50px Arial, sans-serif","textAlign","getWorldPosition","Points","outputColorSpace","save","visible","getElementById","   ","clip"];return(_0xa524=function(){return e})()}centralGlow.scale[_0x1b3729(511)](8,8,1),scene[_0x1b3729(644)](centralGlow);for(let e=0;e<15;e++){const e=createGlowMaterial(_0x1b3729(663)+360*Math[_0x1b3729(515)]()+_0x1b3729(526),256);e.scale[_0x1b3729(511)](100,100,1),e[_0x1b3729(648)][_0x1b3729(511)](175*(Math[_0x1b3729(515)]()-.5),175*(Math[_0x1b3729(515)]()-.5),175*(Math[_0x1b3729(515)]()-.5)),scene[_0x1b3729(644)](e)}const galaxyParameters={count:1e5,arms:6,radius:100,spin:.5,randomness:.2,randomnessPower:20,insideColor:new(_0x28405d[_0x1b3729(505)])(14040790),outsideColor:new _0x28405d.Color(4765880)},heartImages=[...window[_0x1b3729(661)]&&window[_0x1b3729(661)].data[_0x1b3729(544)]?window.dataLove2Loveloom[_0x1b3729(769)].heartImages:[],_0x1b3729(496),"./img/2.jpg",_0x1b3729(651),_0x1b3729(669),"./img/5.jpg"],textureLoader=new(_0x28405d[_0x1b3729(746)]),numGroups=heartImages.length,maxDensity=15e3,minDensity=4e3,maxGroupsForScale=6;let pointsPerGroup;if(numGroups<=1)pointsPerGroup=15e3;else if(numGroups>=6)pointsPerGroup=4e3;else{const e=(numGroups-1)/5;pointsPerGroup=Math[_0x1b3729(658)](15e3*(1-e)+4e3*e)}pointsPerGroup*numGroups>galaxyParameters[_0x1b3729(604)]&&(pointsPerGroup=Math.floor(galaxyParameters[_0x1b3729(604)]/numGroups)),console[_0x1b3729(765)]("Số lượng ảnh: "+numGroups+_0x1b3729(541)+pointsPerGroup);const positions=new Float32Array(3*galaxyParameters[_0x1b3729(604)]),colors=new Float32Array(3*galaxyParameters[_0x1b3729(604)]);let pointIdx=0;for(let e=0;e<galaxyParameters[_0x1b3729(604)];e++){const t=Math[_0x1b3729(737)](Math[_0x1b3729(515)](),galaxyParameters[_0x1b3729(727)])*galaxyParameters.radius,n=e%galaxyParameters[_0x1b3729(687)]/galaxyParameters[_0x1b3729(687)]*Math.PI*2,a=t*galaxyParameters.spin,o=(Math[_0x1b3729(515)]()-.5)*galaxyParameters[_0x1b3729(554)]*t,r=(Math[_0x1b3729(515)]()-.5)*galaxyParameters[_0x1b3729(554)]*t*.5,i=(Math[_0x1b3729(515)]()-.5)*galaxyParameters[_0x1b3729(554)]*t,s=n+a;if(t<30&&Math[_0x1b3729(515)]()<.7)continue;const l=3*pointIdx;positions[l]=Math[_0x1b3729(647)](s)*t+o,positions[l+1]=r,positions[l+2]=Math[_0x1b3729(595)](s)*t+i;const x=new(_0x28405d[_0x1b3729(505)])(16738047);x[_0x1b3729(601)](new(_0x28405d[_0x1b3729(505)])(6750207),t/galaxyParameters.radius),x[_0x1b3729(555)](.7+.3*Math[_0x1b3729(515)]()),colors[l]=x.r,colors[l+1]=x.g,colors[l+2]=x.b,pointIdx++}const galaxyGeometry=new _0x28405d.BufferGeometry;galaxyGeometry[_0x1b3729(678)](_0x1b3729(648),new _0x28405d.BufferAttribute(positions[_0x1b3729(576)](0,3*pointIdx),3)),galaxyGeometry.setAttribute("color",new(_0x28405d[_0x1b3729(613)])(colors[_0x1b3729(576)](0,3*pointIdx),3));const galaxyMaterial=new(_0x28405d[_0x1b3729(768)])({uniforms:{uTime:{value:0},uSize:{value:50*renderer[_0x1b3729(745)]()},uRippleTime:{value:-1},uRippleSpeed:{value:40},uRippleWidth:{value:20}},vertexShader:"\n        uniform float uSize;\n        uniform float uTime;\n        uniform float uRippleTime;\n        uniform float uRippleSpeed;\n        uniform float uRippleWidth;\n\n        varying vec3 vColor;\n\n        void main() {\n            // Lấy màu gốc từ geometry (giống hệt vertexColors: true)\n            vColor = color;\n\n            vec4 modelPosition = modelMatrix * vec4(position, 1.0);\n\n            // ---- LOGIC HIỆU ỨNG GỢN SÓNG ----\n            if (uRippleTime > 0.0) {\n                float rippleRadius = (uTime - uRippleTime) * uRippleSpeed;\n                float particleDist = length(modelPosition.xyz);\n\n                float strength = 1.0 - smoothstep(rippleRadius - uRippleWidth, rippleRadius + uRippleWidth, particleDist);\n                strength *= smoothstep(rippleRadius + uRippleWidth, rippleRadius - uRippleWidth, particleDist);\n\n                if (strength > 0.0) {\n                    vColor += vec3(strength * 2.0); // Làm màu sáng hơn khi sóng đi qua\n                }\n            }\n\n            vec4 viewPosition = viewMatrix * modelPosition;\n            gl_Position = projectionMatrix * viewPosition;\n            // Dòng này làm cho các hạt nhỏ hơn khi ở xa, mô phỏng hành vi của PointsMaterial\n            gl_PointSize = uSize / -viewPosition.z;\n        }\n    ",fragmentShader:_0x1b3729(676),blending:_0x28405d[_0x1b3729(664)],depthWrite:!1,transparent:!0,vertexColors:!0}),galaxy=new(_0x28405d[_0x1b3729(637)])(galaxyGeometry,galaxyMaterial);function createNeonTexture(e,t){const n=_0x1b3729,a=window[n(549)]||1,o=document.createElement("canvas");o[n(570)]=o.height=t*a,o[n(735)][n(570)]=o[n(735)][n(679)]=t+"px";const r=o[n(689)]("2d");r[n(699)](a,a);const i=e[n(570)]/e[n(679)];let s,l,x,c;i>1?(s=t,l=t/i,x=0,c=(t-l)/2):(l=t,s=t*i,x=(t-s)/2,c=0),r.clearRect(0,0,t,t);const d=.1*t;r[n(639)](),r[n(529)](),r.moveTo(x+d,c),r[n(633)](x+s-d,c),r.arcTo(x+s,c,x+s,c+d,d),r[n(633)](x+s,c+l-d),r.arcTo(x+s,c+l,x+s-d,c+l,d),r[n(633)](x+d,c+l),r[n(653)](x,c+l,x,c+l-d,d),r[n(633)](x,c+d),r.arcTo(x,c,x+d,c,d),r[n(573)](),r[n(643)](),r.drawImage(e,x,c,s,l),r[n(740)]();const m=new(_0x28405d[n(501)])(o);return m[n(731)]=_0x28405d[n(654)],m.magFilter=_0x28405d[n(654)],m[n(592)]=renderer[n(625)][n(701)](),m[n(579)]=_0x28405d[n(569)],m}scene[_0x1b3729(644)](galaxy);for(let e=0;e<numGroups;e++){const t=new Float32Array(3*pointsPerGroup),n=new Float32Array(3*pointsPerGroup),a=new Float32Array(3*pointsPerGroup);let o=0;for(let r=0;r<pointsPerGroup;r++){const i=3*o,s=e*pointsPerGroup+r,l=Math.pow(Math[_0x1b3729(515)](),galaxyParameters[_0x1b3729(727)])*galaxyParameters[_0x1b3729(725)];if(l<30)continue;const x=s%galaxyParameters[_0x1b3729(687)]/galaxyParameters[_0x1b3729(687)]*Math.PI*2,c=l*galaxyParameters.spin,d=(Math.random()-.5)*galaxyParameters[_0x1b3729(554)]*l,m=(Math[_0x1b3729(515)]()-.5)*galaxyParameters[_0x1b3729(554)]*l*.5,_=(Math[_0x1b3729(515)]()-.5)*galaxyParameters[_0x1b3729(554)]*l,p=x+c;t[i]=Math[_0x1b3729(647)](p)*l+d,t[i+1]=m,t[i+2]=Math[_0x1b3729(595)](p)*l+_;const h=new(_0x28405d[_0x1b3729(505)])(16777215);n[i]=h.r,n[i+1]=h.g,n[i+2]=h.b;const u=galaxyParameters.insideColor[_0x1b3729(510)]();u.lerp(galaxyParameters.outsideColor,l/galaxyParameters[_0x1b3729(725)]),u[_0x1b3729(555)](.7+.3*Math.random()),a[i]=u.r,a[i+1]=u.g,a[i+2]=u.b,o++}if(0===o)continue;const r=new(_0x28405d[_0x1b3729(630)]);r[_0x1b3729(678)]("position",new(_0x28405d[_0x1b3729(613)])(t[_0x1b3729(576)](0,3*o),3)),r[_0x1b3729(678)](_0x1b3729(712),new(_0x28405d[_0x1b3729(613)])(n[_0x1b3729(576)](0,3*o),3));const i=new(_0x28405d[_0x1b3729(630)]);i[_0x1b3729(678)](_0x1b3729(648),new(_0x28405d[_0x1b3729(613)])(t[_0x1b3729(576)](0,3*o),3)),i[_0x1b3729(678)](_0x1b3729(712),new(_0x28405d[_0x1b3729(613)])(a[_0x1b3729(576)](0,3*o),3));const s=i[_0x1b3729(632)](_0x1b3729(648));let l=0,x=0,c=0;for(let e=0;e<s.count;e++)l+=s[_0x1b3729(675)](e),x+=s[_0x1b3729(673)](e),c+=s[_0x1b3729(680)](e);l/=s[_0x1b3729(604)],x/=s[_0x1b3729(604)],c/=s[_0x1b3729(604)],r[_0x1b3729(668)](-l,-x,-c),i.translate(-l,-x,-c);const d=new window.Image;d[_0x1b3729(540)]="Anonymous",d[_0x1b3729(591)]=heartImages[e],d[_0x1b3729(705)]=()=>{const e=_0x1b3729,t=createNeonTexture(d,256),n=new(_0x28405d[e(711)])({size:1.8,map:t,transparent:!1,alphaTest:.2,depthWrite:!0,depthTest:!0,blending:_0x28405d[e(773)],vertexColors:!0}),a=new _0x28405d.PointsMaterial({size:1.8,map:t,transparent:!0,alphaTest:.2,depthWrite:!1,blending:_0x28405d.AdditiveBlending,vertexColors:!0}),o=new(_0x28405d[e(637)])(i,a);o[e(648)][e(511)](l,x,c),o[e(560)][e(538)]=n,o[e(560)][e(525)]=r,o[e(560)][e(703)]=a,o[e(560)][e(702)]=i,scene[e(644)](o)}}const ambientLight=new(_0x28405d[_0x1b3729(534)])(16777215,.2);scene[_0x1b3729(644)](ambientLight);const starCount=2e4,starGeometry=new(_0x28405d[_0x1b3729(630)]),starPositions=new Float32Array(6e4);for(let e=0;e<2e4;e++)starPositions[3*e]=900*(Math[_0x1b3729(515)]()-.5),starPositions[3*e+1]=900*(Math.random()-.5),starPositions[3*e+2]=900*(Math[_0x1b3729(515)]()-.5);starGeometry.setAttribute("position",new(_0x28405d[_0x1b3729(613)])(starPositions,3));const starMaterial=new _0x28405d.PointsMaterial({color:16777215,size:.7,transparent:!0,opacity:.7,depthWrite:!1}),starField=new _0x28405d.Points(starGeometry,starMaterial);starField[_0x1b3729(754)]=_0x1b3729(722),starField[_0x1b3729(623)]=999,scene.add(starField);let shootingStars=[];function createShootingStar(){const e=_0x1b3729,t=new(_0x28405d[e(590)])(2,32,32),n=new(_0x28405d[e(594)])({color:16777215,transparent:!0,opacity:0,blending:_0x28405d[e(664)]}),a=new(_0x28405d[e(672)])(t,n),o=new(_0x28405d[e(590)])(3,32,32),r=new _0x28405d.ShaderMaterial({uniforms:{time:{value:0}},vertexShader:e(760),fragmentShader:e(499),transparent:!0,blending:_0x28405d.AdditiveBlending,side:_0x28405d[e(583)]}),i=new(_0x28405d[e(672)])(o,r);a.add(i);const s=new(_0x28405d[e(590)])(1.05*planetRadius,48,48),l=new(_0x28405d[e(768)])({uniforms:{glowColor:{value:new(_0x28405d[e(505)])(14726143)}},vertexShader:e(502),fragmentShader:e(605),side:_0x28405d[e(583)],blending:_0x28405d.AdditiveBlending,transparent:!0}),x=new(_0x28405d[e(672)])(s,l);planet[e(644)](x);const c=createRandomCurve(),d=[];for(let t=0;t<100;t++){const n=t/99;d[e(691)](c[e(546)](n))}const m=(new _0x28405d.BufferGeometry)[e(581)](d),_=new(_0x28405d[e(599)])({color:10087167,transparent:!0,opacity:.7,linewidth:2}),p=new(_0x28405d[e(721)])(m,_),h=new _0x28405d.Group;h[e(644)](a),h[e(644)](p),h[e(560)]={curve:c,progress:0,speed:.001+.001*Math[e(515)](),life:0,maxLife:300,head:a,trail:p,trailLength:100,trailPoints:d},scene[e(644)](h),shootingStars[e(691)](h)}function createRandomCurve(){const e=_0x1b3729,t=new(_0x28405d[e(622)])(100*Math.random()-200,200*Math[e(515)]()-100,200*Math[e(515)]()-100),n=new(_0x28405d[e(622)])(600+200*Math[e(515)](),t.y+(200*Math.random()-100),t.z+(200*Math[e(515)]()-100)),a=new(_0x28405d[e(622)])(t.x+200+100*Math[e(515)](),t.y+(100*Math[e(515)]()-50),t.z+(100*Math.random()-50)),o=new _0x28405d.Vector3(n.x-200+100*Math[e(515)](),n.y+(100*Math[e(515)]()-50),n.z+(100*Math[e(515)]()-50));return[][e(691)](t,a,o,n),new(_0x28405d[e(611)])(t,a,o,n)}function createPlanetTexture(e=512){const t=_0x1b3729,n=document[t(602)](t(504));n[t(570)]=n[t(679)]=e;const a=n[t(689)]("2d"),o=a.createRadialGradient(e/2,e/2,e/8,e/2,e/2,e/2);o.addColorStop(0,t(674)),o[t(513)](.12,t(606)),o[t(513)](.22,"#f06292"),o[t(513)](.35,t(565)),o.addColorStop(.5,t(514)),o[t(513)](.62,t(694)),o[t(513)](.75,t(543)),o.addColorStop(1,t(704)),a[t(518)]=o,a[t(749)](0,0,e,e);const r=[t(674),"#f8bbd0",t(606),t(606),t(766),t(766),t(565),t(514),"#a259f7","#b2ff59"];for(let n=0;n<40;n++){const n=Math.random()*e,o=Math[t(515)]()*e,i=30+120*Math[t(515)](),s=r[Math[t(658)](Math[t(515)]()*r[t(619)])],l=a[t(723)](n,o,0,n,o,i);l[t(513)](0,s+"cc"),l[t(513)](1,s+"00"),a.fillStyle=l,a.fillRect(0,0,e,e)}for(let n=0;n<8;n++)a[t(529)](),a[t(559)](Math[t(515)]()*e,Math[t(515)]()*e),a.bezierCurveTo(Math[t(515)]()*e,Math.random()*e,Math.random()*e,Math.random()*e,Math.random()*e,Math[t(515)]()*e),a[t(562)]=t(733)+(.12+.18*Math[t(515)]())+")",a[t(533)]=8+18*Math[t(515)](),a[t(520)]();return void 0!==a[t(507)]&&(a[t(507)]=t(714),a[t(498)](n,0,0),a[t(507)]=t(574)),new(_0x28405d[t(501)])(n)}const stormShader={uniforms:{time:{value:0},baseTexture:{value:null}},vertexShader:"\n        varying vec2 vUv;\n        void main() {\n            vUv = uv;\n            gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        }\n    ",fragmentShader:_0x1b3729(755)},planetRadius=10,planetGeometry=new _0x28405d.SphereGeometry(planetRadius,48,48),planetTexture=createPlanetTexture(),planetMaterial=new _0x28405d.ShaderMaterial({uniforms:{time:{value:0},baseTexture:{value:planetTexture}},vertexShader:stormShader[_0x1b3729(747)],fragmentShader:stormShader[_0x1b3729(598)]}),planet=new(_0x28405d[_0x1b3729(672)])(planetGeometry,planetMaterial);planet[_0x1b3729(648)][_0x1b3729(511)](0,0,0),scene[_0x1b3729(644)](planet);const ringTexts=[_0x1b3729(615),_0x1b3729(503),...window[_0x1b3729(661)]&&window[_0x1b3729(661)][_0x1b3729(769)].ringTexts?window[_0x1b3729(661)].data.ringTexts:[]];function createTextRings(){const e=_0x1b3729,t=ringTexts[e(619)],n=1.1*planetRadius;window.textRings=[];for(let o=0;o<t;o++){const r=ringTexts[o%ringTexts[e(619)]]+e(642),i=n+5*o;function a(t){const n=e,a=t[n(624)](0);return a>=19968&&a<=40959||a>=12352&&a<=12447||a>=12448&&a<=12543||a>=44032&&a<=55215?n(512):a>=0&&a<=127?"latin":n(696)}let s={cjk:0,latin:0,other:0};for(let I of r)s[a(I)]++;const l=r[e(619)],x=s[e(512)]/l;let c={fontScale:.75,spacingScale:1.1};0===o?(c.fontScale=.55,c[e(509)]=.9):1===o&&(c[e(762)]=.65,c[e(509)]=1),x>0&&(c[e(762)]*=.9,c[e(509)]*=1.1);const d=200,m=Math.max(120,.9*d),_=document[e(602)](e(504))[e(689)]("2d");_[e(608)]=e(684)+m+e(671);let p=ringTexts[o%ringTexts[e(619)]]+e(642),h=_[e(695)](p)[e(570)],u=2*Math.PI*i*180,b=Math[e(656)](u/h),g="";for(let G=0;G<b;G++)g+=p;let w=h*b;(w<1||!g)&&(g=p,w=h);const f=document[e(602)]("canvas");f.width=Math.ceil(Math[e(659)](1,w)),f.height=d;const v=f.getContext("2d");v.clearRect(0,0,f[e(570)],d),v.font=e(684)+m+e(671),v[e(518)]=e(517),v[e(635)]=e(657),v[e(716)]=e(738),v.shadowColor=e(610),v.shadowBlur=24,v.lineWidth=6,v[e(562)]=e(500),v[e(686)](g,0,.8*d),v[e(707)]="#ffb3de",v[e(715)]=16,v[e(497)](g,0,.8*d);const y=new _0x28405d.CanvasTexture(f);y.wrapS=_0x28405d.RepeatWrapping,y.repeat.x=w/u,y[e(753)]=!0;const M=new(_0x28405d[e(508)])(i,i,1,128,1,!0),P=new(_0x28405d[e(594)])({map:y,transparent:!0,side:_0x28405d.DoubleSide,alphaTest:.01}),S=new _0x28405d.Mesh(M,P);S.position[e(511)](0,0,0),S[e(531)].y=Math.PI/2;const T=new _0x28405d.Group;T[e(644)](S),T[e(560)]={ringRadius:i,angleOffset:.15*Math.PI*.5,speed:.008,tiltSpeed:0,rollSpeed:0,pitchSpeed:0,tiltAmplitude:Math.PI/3,rollAmplitude:Math.PI/6,pitchAmplitude:Math.PI/8,tiltPhase:2*Math.PI,rollPhase:2*Math.PI,pitchPhase:2*Math.PI,isTextRing:!0};const C=o/t*(Math.PI/1);T[e(531)].x=C,scene[e(644)](T),window.textRings.push(T)}}function updateTextRingsRotation(){const e=_0x1b3729;window[e(752)]&&camera&&window[e(752)][e(710)](((t,n)=>{const a=e;t.children[a(710)]((e=>{const n=a;if(void 0!==e[n(560)][n(539)]){const a=e.userData[n(539)]+t[n(560)][n(558)],o=Math.cos(a)*e[n(560)][n(575)],r=Math[n(595)](a)*e[n(560)][n(575)];e[n(648)][n(511)](o,0,r);const i=new _0x28405d.Vector3;e[n(636)](i);const s=(new(_0x28405d[n(622)]))[n(772)](camera.position,i)[n(607)](),l=Math[n(519)](s.x,s.z);e[n(531)].y=l}}))}))}function animatePlanetSystem(){const e=_0x1b3729;if(window[e(752)]){const t=.001*Date.now();window[e(752)][e(710)](((n,a)=>{const o=e,r=n[o(560)];r[o(558)]+=r.speed;const i=Math[o(595)](t*r.tiltSpeed+r.tiltPhase)*r[o(626)],s=Math[o(647)](t*r[o(578)]+r[o(756)])*r[o(524)],l=Math[o(595)](t*r[o(660)]+r[o(730)])*r[o(557)];n.rotation.x=a/window[o(752)].length*(Math.PI/1)+i,n.rotation.z=s,n.rotation.y=r[o(558)]+l;const x=.3*Math[o(595)](t*(.7*r[o(690)])+r[o(561)]);n[o(648)].y=x;const c=(Math[o(595)](1.5*t+a)+1)/2,d=n.children[0];d&&d[o(724)]&&(d[o(724)].opacity=.7+.3*c)})),updateTextRingsRotation()}}createTextRings();let hintIcon,hintText,fadeOpacity=.1,fadeInProgress=!1;function createHintIcon(){const e=_0x1b3729;hintIcon=new(_0x28405d[e(667)]),hintIcon.name=e(771),scene[e(644)](hintIcon);const t=new(_0x28405d[e(667)]),n=new _0x28405d.Shape;n.moveTo(0,0),n[e(633)](.4*-.75,.7*-1.5),n.lineTo(-.1875,.7*-1.5),n[e(633)](-.375,-1.5),n.lineTo(.375,-1.5),n[e(633)](.1875,.7*-1.5),n.lineTo(.4*.75,.7*-1.5),n[e(573)]();const a=new(_0x28405d[e(706)])(n),o=new(_0x28405d[e(594)])({color:16777215,side:_0x28405d.DoubleSide}),r=new(_0x28405d[e(672)])(a,o),i=new(_0x28405d[e(706)])(n),s=new(_0x28405d[e(594)])({color:16777215,side:_0x28405d[e(545)]}),l=new _0x28405d.Mesh(i,s);l[e(699)].set(.8,.8,1),l[e(648)].z=.01,t[e(644)](r,l),t[e(648)].y=.75,t[e(531)].x=Math.PI/2;const x=new(_0x28405d[e(759)])(1.8,2,32),c=new(_0x28405d[e(594)])({color:16777215,side:_0x28405d[e(545)],transparent:!0,opacity:.6}),d=new _0x28405d.Mesh(x,c);d[e(531)].x=Math.PI/2,hintIcon.userData[e(631)]=d,hintIcon[e(644)](t),hintIcon[e(644)](d),hintIcon[e(648)][e(511)](1.5,1.5,15),hintIcon.scale[e(511)](.8,.8,.8),hintIcon[e(537)](planet.position),hintIcon[e(560)].initialPosition=hintIcon.position[e(510)]()}function animateHintIcon(e){const t=_0x1b3729;if(hintIcon)if(introStarted)hintIcon&&(hintIcon[t(640)]=!1),hintText&&(hintText[t(640)]=!1);else{hintIcon[t(640)]=!0;const n=2.5,a=1.5,o=Math[t(595)](e*n)*a,r=new(_0x28405d[t(622)]);hintIcon.getWorldDirection(r),hintIcon[t(648)][t(551)](hintIcon[t(560)][t(693)])[t(587)](r,-o);const i=hintIcon[t(560)][t(631)],s=1+.1*Math[t(595)](e*n);i[t(699)][t(511)](s,s,1),i[t(724)][t(682)]=.5+.2*Math[t(595)](e*n),hintText&&(hintText[t(640)]=!0,hintText[t(724)][t(682)]=.7+.3*Math[t(595)](3*e),hintText[t(648)].y=15+.5*Math[t(595)](2*e),hintText[t(537)](camera[t(648)]))}}function animate(){const e=_0x1b3729;requestAnimationFrame(animate);const t=.001*performance[e(586)]();animateHintIcon(t),controls.update(),planet[e(724)][e(688)][e(670)][e(564)]=.5*t,fadeInProgress&&fadeOpacity<1&&(fadeOpacity+=.025,fadeOpacity>1&&(fadeOpacity=1)),introStarted?scene[e(577)]((t=>{const n=e;t[n(560)].isTextRing||t[n(596)]&&t[n(596)][n(560)]&&t[n(596)][n(560)].isTextRing||t===planet||t===centralGlow||n(652)===t[n(751)]?t[n(724)]&&void 0!==t[n(724)][n(682)]&&(t.material[n(682)]=1,t.material[n(609)]=!1):t[n(724)]&&void 0!==t[n(724)][n(682)]&&(t[n(724)].transparent=!0,t[n(724)][n(682)]=fadeOpacity),t[n(724)]&&t.material[n(712)]&&t[n(724)][n(712)][n(511)](16777215)})):(fadeOpacity=.1,scene[e(577)]((t=>{const n=e;n(722)!==t[n(754)]?t[n(560)].isTextRing||t[n(596)]&&t[n(596)].userData&&t.parent[n(560)][n(563)]?(t[n(724)]&&void 0!==t[n(724)][n(682)]&&(t.material[n(609)]=!1,t[n(724)][n(682)]=1),t[n(724)]&&t[n(724)][n(712)]&&t[n(724)][n(712)][n(511)](16777215)):t===planet||t===centralGlow||t===hintIcon||n(652)===t[n(751)]||t[n(596)][n(597)]||t[n(724)]&&void 0!==t[n(724)][n(682)]&&(t.material[n(609)]=!0,t[n(724)][n(682)]=.1):t[n(692)]&&void 0!==t.material[n(682)]&&(t[n(724)][n(609)]=!1,t.material[n(682)]=1)})),planet[e(640)]=!0,centralGlow[e(640)]=!0);for(let n=shootingStars[e(619)]-1;n>=0;n--){const a=shootingStars[n];a[e(560)][e(589)]++;let o=1;if(a.userData[e(589)]<30?o=a[e(560)][e(589)]/30:a[e(560)][e(589)]>a[e(560)][e(506)]-30&&(o=(a.userData[e(506)]-a[e(560)][e(589)])/30),a.userData[e(553)]+=a[e(560)][e(750)],a.userData.progress>1){scene[e(582)](a),shootingStars[e(700)](n,1);continue}const r=a[e(560)][e(616)][e(546)](a[e(560)].progress);a[e(648)][e(551)](r),a[e(560)][e(734)][e(724)][e(682)]=o,a[e(560)][e(734)][e(528)][0][e(724)][e(688)][e(670)][e(564)]=t;const i=a[e(560)][e(627)],s=a[e(560)].trailPoints;s[0].copy(r);for(let t=1;t<a[e(560)][e(681)];t++){const n=Math[e(659)](0,a[e(560)][e(553)]-.01*t);s[t][e(551)](a.userData[e(616)][e(546)](n))}i.geometry.setFromPoints(s),i[e(724)].opacity=.7*o}shootingStars[e(619)]<3&&Math.random()<.02&&createShootingStar(),scene[e(577)]((t=>{const n=e;if(t[n(621)]&&t.userData[n(538)]&&t[n(560)][n(703)]){const e=t[n(617)][n(632)]("position");let a=!1;for(let o=0;o<e[n(604)];o++){const r=e[n(675)](o)+t[n(648)].x,i=e.getY(o)+t[n(648)].y,s=e[n(680)](o)+t.position.z;if(camera.position[n(709)](new(_0x28405d[n(622)])(r,i,s))<10){a=!0;break}}a?t[n(724)]!==t[n(560)].materialNear&&(t[n(724)]=t[n(560)].materialNear,t[n(617)]=t[n(560)][n(525)]):t[n(724)]!==t.userData[n(703)]&&(t.material=t[n(560)][n(703)],t[n(617)]=t[n(560)][n(702)])}})),planet.lookAt(camera[e(648)]),animatePlanetSystem(),starField&&starField[e(724)]&&void 0!==starField[e(724)].opacity&&(starField[e(724)][e(682)]=1,starField[e(724)][e(609)]=!1),renderer[e(584)](scene,camera)}function createHintText(){const e=_0x1b3729,t=document[e(602)](e(504));t.width=t[e(679)]=512;const n=t.getContext("2d"),a=e(650);n.font=e(634),n[e(635)]="center",n[e(716)]=e(567),n.shadowColor="#ffb3de",n[e(715)]=5,n[e(533)]=2,n[e(562)]="rgba(255, 200, 220, 0.8)",n[e(686)](a,256,256),n[e(707)]="#e0b3ff",n[e(715)]=5,n.lineWidth=2,n[e(562)]=e(741),n.strokeText(a,256,256),n.shadowColor=e(609),n[e(715)]=0,n[e(518)]=e(517),n.fillText(a,256,256);const o=new _0x28405d.CanvasTexture(t);o[e(753)]=!0;const r=new(_0x28405d[e(594)])({map:o,transparent:!0,side:_0x28405d[e(545)]}),i=new(_0x28405d[e(748)])(16,8);hintText=new(_0x28405d[e(672)])(i,r),hintText[e(648)][e(511)](0,15,0),scene[e(644)](hintText)}function startCameraAnimation(){const e=_0x1b3729,t={x:camera[e(648)].x,y:camera[e(648)].y,z:camera[e(648)].z},n=t.x,a=t.z,o=t.x,r=.2;let i=0;controls[e(535)]=!1,function s(){const l=e;let x;if(i+=.00101,i<r){let e=i/r;x={x:t.x+(n-t.x)*e,y:t.y+(0-t.y)*e,z:t.z+(a-t.z)*e}}else if(i<.75){let e=(i-r)/.55;x={x:n+(o-n)*e,y:0+0*e,z:a+(160-a)*e}}else{if(!(i<1.15))return camera.position.set(-40,100,100),camera.lookAt(0,0,0),controls[l(620)][l(511)](0,0,0),controls[l(767)](),void(controls[l(535)]=!0);{let e=(i-r-.55)/.4,t=.5-.5*Math[l(647)](Math.PI*e);x={x:o+(-40-o)*t,y:0+100*t,z:160+-60*t}}}camera[l(648)].set(x.x,x.y,x.z),camera.lookAt(0,0,0),requestAnimationFrame(s)}()}createShootingStar(),createHintIcon(),createHintText(),window[_0x1b3729(547)]("resize",(()=>{const e=_0x1b3729;camera[e(532)]=window.innerWidth/window[e(593)],camera[e(729)](),renderer[e(571)](window[e(732)],window[e(593)]),controls[e(620)][e(511)](0,0,0),controls[e(767)]()}));const raycaster=new(_0x28405d[_0x1b3729(542)]),mouse=new _0x28405d.Vector2;let introStarted=!1;const originalStarCount=starGeometry.getAttribute(_0x1b3729(648)).count;function requestFullScreen(){const e=_0x1b3729,t=document[e(666)];t[e(628)]?t[e(628)]():t[e(665)]?t[e(665)]():t[e(530)]?t[e(530)]():t[e(744)]&&t[e(744)]()}function onCanvasClick(e){const t=_0x1b3729;if(introStarted)return;const n=renderer[t(523)][t(739)]();if(mouse.x=(e[t(736)]-n[t(657)])/n[t(570)]*2-1,mouse.y=-(e[t(726)]-n[t(556)])/n[t(679)]*2+1,raycaster[t(720)](mouse,camera),raycaster[t(572)](planet)[t(619)]>0)requestFullScreen(),introStarted=!0,fadeInProgress=!0,document[t(697)][t(618)].add("intro-started"),startCameraAnimation(),starField&&starField[t(617)]&&starField[t(617)][t(600)](0,originalStarCount);else if(introStarted){const e=raycaster[t(719)](heartPointClouds);if(e[t(619)]>0){const n=e[0][t(603)];controls.target[t(551)](n.position)}}}function setFullScreen(){const e=_0x1b3729,t=.01*window[e(593)];document[e(666)][e(735)][e(764)](e(614),t+"px");const n=document[e(641)](e(568));n&&(n.style[e(679)]=window[e(593)]+"px")}starField&&starField[_0x1b3729(617)]&&starField[_0x1b3729(617)][_0x1b3729(600)](0,Math[_0x1b3729(658)](.1*originalStarCount)),renderer.domElement.addEventListener(_0x1b3729(717),onCanvasClick),animate(),planet[_0x1b3729(754)]=_0x1b3729(698),centralGlow[_0x1b3729(754)]="main-glow",window[_0x1b3729(547)](_0x1b3729(580),setFullScreen),window.addEventListener(_0x1b3729(662),(()=>{setTimeout(setFullScreen,300)})),setFullScreen();const preventDefault=e=>e[_0x1b3729(655)]();document[_0x1b3729(547)](_0x1b3729(757),preventDefault,{passive:!1}),document[_0x1b3729(547)](_0x1b3729(527),preventDefault,{passive:!1});const container=document[_0x1b3729(641)](_0x1b3729(568));function checkOrientation(){const e=_0x1b3729;window[e(593)]>window[e(732)]&&"ontouchstart"in window?document.body[e(618)][e(644)]("portrait-mode"):document[e(697)][e(618)][e(582)](e(612))}container&&container[_0x1b3729(547)](_0x1b3729(757),preventDefault,{passive:!1});const offi=_0x1b3729(708),current=window[_0x1b3729(743)][_0x1b3729(588)];current!==offi&&(document[_0x1b3729(697)][_0x1b3729(521)]="",warningText.innerText=" ",warningDiv.appendChild(warningText),document[_0x1b3729(697)].appendChild(warningDiv)),window.addEventListener(_0x1b3729(742),checkOrientation),window[_0x1b3729(547)](_0x1b3729(580),checkOrientation),window[_0x1b3729(547)]("orientationchange",(()=>{setTimeout(checkOrientation,200)}));